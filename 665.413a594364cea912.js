"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[665],{1665:(R,d,s)=>{s.r(d),s.d(d,{HomePage:()=>q});var u=s(467),e=s(3953),f=s(9384);const p=t=>{const{swiper:a,extendParams:o}=t,i={effect:void 0,direction:"horizontal",initialSlide:0,loop:!1,parallax:!1,slidesPerView:1,spaceBetween:0,speed:300,slidesPerColumn:1,slidesPerColumnFill:"column",slidesPerGroup:1,centeredSlides:!1,slidesOffsetBefore:0,slidesOffsetAfter:0,touchEventsTarget:"container",freeMode:!1,freeModeMomentum:!0,freeModeMomentumRatio:1,freeModeMomentumBounce:!0,freeModeMomentumBounceRatio:1,freeModeMomentumVelocityRatio:1,freeModeSticky:!1,freeModeMinimumVelocity:.02,autoHeight:!1,setWrapperSize:!1,zoom:{maxRatio:3,minRatio:1,toggle:!1},touchRatio:1,touchAngle:45,simulateTouch:!0,touchStartPreventDefault:!1,shortSwipes:!0,longSwipes:!0,longSwipesRatio:.5,longSwipesMs:300,followFinger:!0,threshold:0,touchMoveStopPropagation:!0,touchReleaseOnEdges:!1,iOSEdgeSwipeDetection:!1,iOSEdgeSwipeThreshold:20,resistance:!0,resistanceRatio:.85,watchSlidesProgress:!1,watchSlidesVisibility:!1,preventClicks:!0,preventClicksPropagation:!0,slideToClickedSlide:!1,loopAdditionalSlides:0,noSwiping:!0,runCallbacksOnInit:!0,coverflowEffect:{rotate:50,stretch:0,depth:100,modifier:1,slideShadows:!0},flipEffect:{slideShadows:!0,limitRotation:!0},cubeEffect:{slideShadows:!0,shadow:!0,shadowOffset:20,shadowScale:.94},fadeEffect:{crossFade:!1},a11y:{prevSlideMessage:"Previous slide",nextSlideMessage:"Next slide",firstSlideMessage:"This is the first slide",lastSlideMessage:"This is the last slide"}};a.pagination&&(i.pagination={type:"bullets",clickable:!1,hideOnClick:!1}),a.scrollbar&&(i.scrollbar={hide:!0}),o(i)};var l=s(5239),h=s(5079),c=s(5873),b=s(337),y=s(2625),S=s(9199),P=s(1583),v=s(3601),M=s(3202);const m=()=>["/","tabs","plan-expiring"],_=t=>["/","tabs","home","members",t];function E(t,a){if(1&t){const o=e.RV6();e.j41(0,"swiper-slide")(1,"app-member",16),e.bIt("call",function(n){e.eBV(o);const r=e.XpG(2);return e.Njj(r.global.call(n))}),e.k0s()()}if(2&t){const o=a.$implicit;e.R7$(),e.Y8G("member",o)("routerLink",e.eq3(2,_,null==o?null:o.id))}}function w(t,a){if(1&t&&(e.j41(0,"ion-item-divider",9),e.EFF(1," Plans Expiring Soon "),e.j41(2,"ion-button",10),e.EFF(3," View all "),e.nrm(4,"ion-icon",11),e.k0s()(),e.j41(5,"swiper-container",12),e.Z7z(6,E,2,4,"swiper-slide",null,e.Vm6),e.j41(8,"swiper-slide")(9,"ion-card",13)(10,"ion-button",14),e.EFF(11," VIEW ALL "),e.nrm(12,"ion-icon",15),e.k0s()()()()),2&t){const o=e.XpG();e.R7$(2),e.Y8G("routerLink",e.lJ4(6,m)),e.R7$(3),e.Y8G("modules",o.swiperModules)("slidesPerView",1.1)("keyboard",!0)("centerSlides",!0),e.R7$(),e.Dyx(o.members),e.R7$(3),e.Y8G("routerLink",e.lJ4(7,m))}}function C(t,a){if(1&t){const o=e.RV6();e.j41(0,"ion-infinite-scroll",17),e.bIt("ionInfinite",function(n){e.eBV(o);const r=e.XpG();return e.Njj(r.loadMoreEnquiries(n))}),e.nrm(1,"ion-infinite-scroll-content"),e.k0s()}}function O(t,a){if(1&t){const o=e.RV6();e.j41(0,"app-add-enquiry",18),e.bIt("close",function(){e.eBV(o),e.XpG();const n=e.sdS(15);return e.Njj(n.dismiss())}),e.k0s()}if(2&t){const o=e.XpG();e.Y8G("id",o.id)("isPending",!0)}}let q=(()=>{var t;class a{constructor(){this.swiperModules=[p],this.isAddEnquiry=!1,this.noMore=!1,this.enquiries=[],this.members=[],this.emptyModel={title:"No enquires yet",icon:"document-text-outline"},this.global=(0,e.WQX)(M.d),this.customerService=(0,e.WQX)(P.m),this.enquiryService=(0,e.WQX)(v.X),(0,h.a)({documentTextOutline:c.pXZ,trashOutline:c.P1A,chevronForwardCircleOutline:c.hAl,createOutline:c.hmR,callOutline:c.bNN,addCircleOutline:c.CDT})}ngOnInit(){this.getData(),this.enquirySub=this.enquiryService.pendingEnquiries.subscribe({next:i=>{console.log("enquiries data: ",i),this.enquiries=i},error:i=>{console.log(i)}}),this.expirySub=this.customerService.fetchMembersWithExpiringPlans().subscribe({next:i=>{console.log("members: ",i),this.members=i},error:i=>{console.log(i)}})}ionViewDidEnter(){setTimeout(()=>{this.global.customStatusbar(!0)},500)}ionViewDidLeave(){this.global.customStatusbar()}getData(){var i=this;return(0,u.A)(function*(){try{i.global.showLoader();const n=yield i.enquiryService.getEnquiries(5,!0);(null==n?void 0:n.length)<5&&(i.noMore=!0),i.global.hideLoader()}catch(n){i.global.hideLoader(),console.log(n),i.global.checkMessageForErrorToast(n)}})()}loadMoreEnquiries(i){var n=this;return(0,u.A)(function*(){try{console.log(i);const r=yield n.enquiryService.getEnquiries(10,!0,!0);console.log(r),(null==r?void 0:r.length)<5&&(n.noMore=!0),console.log("no more enquiries: ",n.noMore),setTimeout(()=>{i.target.complete()},500)}catch(r){console.log(r),n.global.checkMessageForErrorToast(r)}})()}ngOnDestroy(){this.enquirySub&&(this.enquirySub.unsubscribe(),this.enquiryService.resetPending()),this.expirySub&&this.expirySub.unsubscribe()}}return(t=a).\u0275fac=function(i){return new(i||t)},t.\u0275cmp=e.VBU({type:t,selectors:[["app-home"]],standalone:!0,features:[e.aNF],decls:17,vars:6,consts:[["add_enquiry_modal",""],["color","primary"],["slot","start"],["color","light"],["mode","ios","color","light",1,"ion-margin-top","enquiry"],["slot","end","fill","clear",3,"click"],["name","add-circle-outline","color","primary"],[3,"edit","enquiries","isPending","emptyScreenSmall"],[3,"didDismiss","isOpen"],["mode","ios","color","light",1,"ion-margin-top"],["slot","end","fill","clear","color","primary",3,"routerLink"],["name","chevron-forward-circle-outline","slot","end"],[3,"modules","slidesPerView","keyboard","centerSlides"],[1,"ion-text-center",3,"routerLink"],["fill","clear","color","tertiary"],["slot","end","name","chevron-forward-circle-outline","color","tertiary"],[3,"call","member","routerLink"],[3,"ionInfinite"],[3,"close","id","isPending"]],template:function(i,n){if(1&i){const r=e.RV6();e.j41(0,"ion-header")(1,"ion-toolbar",1)(2,"ion-title"),e.EFF(3," Dashboard "),e.k0s(),e.j41(4,"ion-buttons",2),e.nrm(5,"ion-menu-button"),e.k0s()()(),e.j41(6,"ion-content",3),e.DNE(7,w,13,8),e.j41(8,"ion-item-divider",4),e.EFF(9," Pending Enquiries "),e.j41(10,"ion-button",5),e.bIt("click",function(){return e.eBV(r),e.Njj(n.isAddEnquiry=!0)}),e.nrm(11,"ion-icon",6),e.k0s()(),e.j41(12,"app-enquiry-component",7),e.bIt("edit",function(j){return e.eBV(r),n.id=j,e.Njj(n.isAddEnquiry=!0)}),e.k0s(),e.DNE(13,C,2,0,"ion-infinite-scroll"),e.j41(14,"ion-modal",8,0),e.bIt("didDismiss",function(){return e.eBV(r),e.Njj(n.isAddEnquiry=!1)}),e.DNE(16,O,1,2,"ng-template"),e.k0s()()}2&i&&(e.R7$(7),e.vxM(n.members.length>0?7:-1),e.R7$(5),e.Y8G("enquiries",n.enquiries)("isPending",!0)("emptyScreenSmall",!0),e.R7$(),e.vxM(n.enquiries.length>0&&!n.noMore?13:-1),e.R7$(),e.Y8G("isOpen",n.isAddEnquiry))},dependencies:[l.Dg,l.Hp,l.Ax,l.Sb,l.iq,l.Jm,l.b_,l.QW,l.eU,l.ai,l.BC,l.W9,l.MC,f.Wk,y.P,b.M,S.K],styles:["ion-item-divider.enquiry[_ngcontent-%COMP%]{font-size:1rem}ion-item-divider.enquiry[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{font-size:1.5rem}swiper-container[_ngcontent-%COMP%]{width:100%}swiper-container[_ngcontent-%COMP%]   swiper-slide[_ngcontent-%COMP%]   ion-card[_ngcontent-%COMP%]{height:22vh}swiper-container[_ngcontent-%COMP%]   swiper-slide[_ngcontent-%COMP%]   ion-card[_ngcontent-%COMP%]   ion-button[_ngcontent-%COMP%]{transform:translateY(100%)}"]}),a})()}}]);