"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[448],{8655:(v,h,a)=>{a.d(h,{V:()=>l});var m=a(177),d=a(5239),e=a(3953);const P=p=>({transform:p});function y(p,f){if(1&p&&(e.j41(0,"ion-text")(1,"p"),e.EFF(2),e.k0s()()),2&p){const u=e.XpG();e.R7$(2),e.JRh(u.model.subTitle)}}let l=(()=>{var p;class f{constructor(){this.fontSize="18rem",this.isMargin="translateY(10vh)"}ngOnInit(){}}return(p=f).\u0275fac=function(g){return new(g||p)},p.\u0275cmp=e.VBU({type:p,selectors:[["app-empty-screen"]],inputs:{model:"model",fontSize:"fontSize",isMargin:"isMargin"},standalone:!0,features:[e.aNF],decls:9,vars:9,consts:[[3,"ngStyle"],[1,"ion-text-center"],[3,"name","color"],[4,"ngIf"]],template:function(g,_){1&g&&(e.j41(0,"ion-grid",0)(1,"ion-row")(2,"ion-col",1),e.nrm(3,"ion-icon",2),e.k0s()(),e.j41(4,"ion-row")(5,"ion-col",1)(6,"ion-label"),e.EFF(7),e.k0s(),e.DNE(8,y,3,1,"ion-text",3),e.k0s()()()),2&g&&(e.Y8G("ngStyle",e.eq3(7,P,_.model.noSpace?"0vh":_.isMargin)),e.R7$(3),e.xc7("font-size",_.fontSize),e.Y8G("name",_.model.icon)("color",_.model.color?_.model.color:"tertiary"),e.R7$(4),e.SpI(" ",_.model.title," "),e.R7$(),e.Y8G("ngIf",null==_.model?null:_.model.subTitle))},dependencies:[d.lO,d.ln,d.hU,d.iq,d.he,d.IO,m.bT,m.B3]}),f})()},6448:(v,h,a)=>{a.r(h),a.d(h,{PlanHistoryPage:()=>U});var m=a(467),d=a(177),e=a(3953),P=a(9384),y=a(600),l=a(5239),p=a(8655),f=a(9685),u=a(3202),g=a(3917),_=a(5109),b=a(8809),M=a(9897),F=a(3979),j=a(2109),T=a(7213);function k(s,r){if(1&s){const t=e.RV6();e.j41(0,"ion-button",11),e.bIt("click",function(){e.eBV(t);const o=e.XpG().$implicit,i=e.XpG();return e.Njj(i.editSession(o))}),e.EFF(1," EDIT "),e.k0s()}}function E(s,r){if(1&s&&(e.j41(0,"ion-item",5)(1,"ion-label"),e.EFF(2," Session #"),e.j41(3,"strong"),e.EFF(4),e.k0s(),e.j41(5,"p"),e.EFF(6," By - "),e.j41(7,"ion-text",9)(8,"strong"),e.EFF(9),e.k0s()()(),e.j41(10,"p"),e.EFF(11),e.nI1(12,"timestampToDate"),e.nI1(13,"date"),e.nI1(14,"timestampToDate"),e.nI1(15,"date"),e.k0s()(),e.DNE(16,k,2,0,"ion-button",10),e.k0s()),2&s){const t=r.$implicit,n=e.XpG();e.R7$(4),e.JRh(null==t?null:t.session_no),e.R7$(5),e.JRh(null==t||null==t.trainer?null:t.trainer.name),e.R7$(2),e.Lme(" ",e.i5U(13,7,e.bMT(12,5,null==t?null:t.start_time),"hh:mm a")," - ",e.i5U(15,12,e.bMT(14,10,null==t?null:t.end_time),"hh:mm a")," "),e.R7$(5),e.vxM("admin"==(null==n.profile?null:n.profile.type)?16:-1)}}function C(s,r){if(1&s&&e.nrm(0,"app-empty-screen",6),2&s){const t=e.XpG();e.Y8G("model",t.emptyModel)}}function I(s,r){if(1&s){const t=e.RV6();e.j41(0,"app-add-pt-session",12),e.bIt("close",function(o){e.eBV(t);const i=e.XpG(),c=e.sdS(14);return e.Njj(i.addPtSessionModalDismiss(o,c))}),e.k0s()}if(2&s){const t=e.XpG();e.Y8G("allTrainers",t.trainers)("batches",t.batches)("plan",t.plan)("session",t.sessionModel)}}let R=(()=>{var s;class r{constructor(){this.close=new e.bkB,this.sessions=[],this.emptyModel={title:"No session book yet",icon:"bookmark-outline"},this.trainers=[],this.batches=[],this.isBookSession=!1,this.sessionModel={},this.sessionService=(0,e.WQX)(F.v),this.global=(0,e.WQX)(u.d),this.trainerService=(0,e.WQX)(j.j),this.batchService=(0,e.WQX)(T.k)}ngOnInit(){this.getSessions(),this.sessionsSub=this.sessionService.sessions.subscribe({next:n=>{this.sessions=n,console.log(this.sessions)},error:n=>{console.log(n)}})}getSessions(){var n=this;return(0,m.A)(function*(){try{var o;n.global.showLoader(),yield n.sessionService.getSessions(null===(o=n.plan)||void 0===o?void 0:o.id,10),n.global.hideLoader()}catch(i){console.log(i),n.global.hideLoader(),n.global.checkMessageForErrorToast(i)}})()}loadMore(n){var o=this;return(0,m.A)(function*(){try{var i;console.log(n);const c=yield o.sessionService.getSessions(null===(i=o.plan)||void 0===i?void 0:i.id,10,!0);console.log(c),setTimeout(()=>{n.target.complete()},500)}catch(c){console.log(c),o.global.checkMessageForErrorToast(c)}})()}editSession(n){var o=this;return(0,m.A)(function*(){try{var i;o.sessionModel=n,0==(null===(i=o.trainers)||void 0===i?void 0:i.length)&&(o.batches=yield o.batchService.getAllBatches(),o.trainers=yield o.trainerService.getAllTrainers(),console.log(o.trainers)),o.isBookSession=!0}catch(c){console.log(c),o.global.checkMessageForErrorToast(c)}})()}dismiss(n){this.close.emit(n)}addPtSessionModalDismiss(n,o){console.log(n),o.dismiss()}ngOnDestroy(){this.sessionsSub&&(this.sessionsSub.unsubscribe(),this.sessionService.reset())}}return(s=r).\u0275fac=function(n){return new(n||s)},s.\u0275cmp=e.VBU({type:s,selectors:[["app-pt-sessions"]],inputs:{plan:"plan",profile:"profile"},outputs:{close:"close"},standalone:!0,features:[e.aNF],decls:16,vars:3,consts:[["book_session_modal",""],["slot","start"],[3,"click"],["name","arrow-back"],[3,"fullscreen"],[1,"ion-margin-top"],[3,"model"],[3,"ionInfinite"],[3,"didDismiss","isOpen"],["color","dark"],["slot","end","fill","clear","color","tertiary"],["slot","end","fill","clear","color","tertiary",3,"click"],[3,"close","allTrainers","batches","plan","session"]],template:function(n,o){if(1&n){const i=e.RV6();e.j41(0,"ion-header")(1,"ion-toolbar")(2,"ion-title"),e.EFF(3,"PT Sessions"),e.k0s(),e.j41(4,"ion-buttons",1)(5,"ion-button",2),e.bIt("click",function(){return e.eBV(i),e.Njj(o.dismiss())}),e.nrm(6,"ion-icon",3),e.k0s()()()(),e.j41(7,"ion-content",4),e.Z7z(8,E,17,15,"ion-item",5,e.Vm6,!1,C,1,1,"app-empty-screen",6),e.j41(11,"ion-infinite-scroll",7),e.bIt("ionInfinite",function(S){return e.eBV(i),e.Njj(o.loadMore(S))}),e.nrm(12,"ion-infinite-scroll-content"),e.k0s(),e.j41(13,"ion-modal",8,0),e.bIt("didDismiss",function(){return e.eBV(i),e.Njj(o.isBookSession=!1)}),e.DNE(15,I,1,4,"ng-template"),e.k0s()()}2&n&&(e.R7$(7),e.Y8G("fullscreen",!0),e.R7$(),e.Dyx(o.sessions),e.R7$(5),e.Y8G("isOpen",o.isBookSession))},dependencies:[l.IO,l.uz,l.Sb,l.Hp,l.Ax,l.he,l.eU,l.BC,l.ai,l.QW,l.iq,l.Jm,l.W9,f.i,d.vh,p.V,M.j],styles:["ion-item[_ngcontent-%COMP%]   ion-label[_ngcontent-%COMP%]{font-size:1rem}ion-item[_ngcontent-%COMP%]   ion-label[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:.85rem;margin-top:5px}"]}),r})();var D=a(8509);function x(s,r){if(1&s){const t=e.RV6();e.j41(0,"ion-button",11),e.bIt("click",function(){e.eBV(t);const o=e.XpG().$implicit,i=e.XpG();return e.Njj(i.editPlan(o))}),e.nrm(1,"ion-icon",12),e.k0s()}}function G(s,r){if(1&s&&(e.EFF(0),e.nI1(1,"date")),2&s){const t=e.XpG(2).$implicit;e.SpI(" Active till ",e.i5U(1,1,null==t?null:t.expiry_date,"MMM d, y")," ")}}function X(s,r){if(1&s&&(e.j41(0,"ion-text"),e.EFF(1),e.nI1(2,"date"),e.k0s()),2&s){const t=e.XpG(2).$implicit;e.R7$(),e.SpI(" Expired on ",e.i5U(2,1,null==t?null:t.expiry_date,"MMM d, y")," ")}}function $(s,r){if(1&s&&(e.j41(0,"ion-item",10)(1,"ion-label"),e.EFF(2),e.j41(3,"p"),e.EFF(4),e.nI1(5,"timestampToDate"),e.nI1(6,"date"),e.k0s(),e.j41(7,"p"),e.DNE(8,G,2,4)(9,X,3,4,"ion-text"),e.k0s()(),e.j41(10,"ion-text",13),e.EFF(11," \u20b9"),e.j41(12,"strong"),e.EFF(13),e.k0s()()()),2&s){const t=e.XpG().$implicit,n=e.XpG();e.R7$(2),e.SpI(" ",null==t?null:t.plan_name," "),e.R7$(2),e.JRh(e.i5U(6,6,e.bMT(5,4,null==t?null:t.created_at),"MMM d, y")),e.R7$(4),e.vxM(n.currentDate<=(null==t?null:t.expiry_date)?8:9),e.R7$(5),e.JRh(null==t?null:t.amount)}}function O(s,r){if(1&s&&(e.EFF(0),e.nI1(1,"date")),2&s){const t=e.XpG(2).$implicit;e.SpI(" Active till ",e.i5U(1,1,null==t?null:t.pt_expiry_date,"MMM d, y")," ")}}function H(s,r){if(1&s&&(e.j41(0,"ion-text"),e.EFF(1),e.nI1(2,"date"),e.k0s()),2&s){const t=e.XpG(2).$implicit;e.R7$(),e.SpI(" Expired on ",e.i5U(2,1,null==t?null:t.pt_expiry_date,"MMM d, y")," ")}}function B(s,r){if(1&s){const t=e.RV6();e.j41(0,"ion-item",10)(1,"ion-label"),e.EFF(2),e.j41(3,"p"),e.EFF(4),e.nI1(5,"timestampToDate"),e.nI1(6,"date"),e.k0s(),e.j41(7,"p"),e.EFF(8),e.k0s(),e.j41(9,"p"),e.DNE(10,O,2,4)(11,H,3,4,"ion-text"),e.k0s()(),e.j41(12,"ion-text",13),e.EFF(13," \u20b9"),e.j41(14,"strong"),e.EFF(15),e.k0s()()(),e.j41(16,"ion-button",14),e.bIt("click",function(){e.eBV(t);const o=e.XpG().$implicit,i=e.XpG();return e.Njj(i.showSessions(o))}),e.nrm(17,"ion-icon",15),e.j41(18,"ion-text",16),e.EFF(19,"PT SESSIONS"),e.k0s()()}if(2&s){const t=e.XpG().$implicit,n=e.XpG();e.R7$(2),e.SpI(" ",null==t?null:t.pt_plan_name," "),e.R7$(2),e.JRh(e.i5U(6,9,e.bMT(5,7,null==t?null:t.created_at),"MMM d, y")),e.R7$(4),e.Lme(" ",null==t?null:t.pt_sessions_used,"/",null==t?null:t.pt_sessions," sessions used "),e.R7$(2),e.vxM(n.currentDate<=(null==t?null:t.pt_expiry_date)?10:11),e.R7$(5),e.JRh(null==t?null:t.pt_amount),e.R7$(),e.Y8G("strong",!0)}}function N(s,r){if(1&s&&(e.j41(0,"ion-card")(1,"ion-item-divider",8),e.EFF(2),e.DNE(3,x,2,0,"ion-button",9),e.k0s(),e.DNE(4,$,14,9,"ion-item",10)(5,B,20,12),e.k0s()),2&s){const t=r.$implicit,n=e.XpG();e.R7$(2),e.SpI(" ",null==t?null:t.type," "),e.R7$(),e.vxM("admin"==(null==n.profile?null:n.profile.type)?3:-1),e.R7$(),e.vxM(null!=t&&t.gym_plan?4:-1),e.R7$(),e.vxM(null!=t&&t.pt_plan?5:-1)}}function V(s,r){if(1&s&&e.nrm(0,"app-empty-screen",5),2&s){const t=e.XpG();e.Y8G("model",t.emptyModel)}}function w(s,r){if(1&s){const t=e.RV6();e.j41(0,"app-renew-package",17),e.bIt("close",function(o){e.eBV(t);const i=e.XpG(),c=e.sdS(13);return e.Njj(i.renewalModalDismiss(o,c))}),e.k0s()}if(2&s){const t=e.XpG();e.Y8G("plan",t.planModel)}}function A(s,r){if(1&s){const t=e.RV6();e.j41(0,"app-renew-pt-package",17),e.bIt("close",function(o){e.eBV(t);const i=e.XpG(),c=e.sdS(16);return e.Njj(i.renewalPtModalDismiss(o,c))}),e.k0s()}if(2&s){const t=e.XpG();e.Y8G("plan",t.planModel)}}function Y(s,r){if(1&s){const t=e.RV6();e.j41(0,"app-pt-sessions",18),e.bIt("close",function(o){e.eBV(t);const i=e.XpG(),c=e.sdS(19);return e.Njj(i.ptSessionsModalDismiss(o,c))}),e.k0s()}if(2&s){const t=e.XpG();e.Y8G("plan",t.planData)("profile",t.profile)}}let U=(()=>{var s;class r{constructor(){this.plans=[],this.emptyModel={title:"No plans taken yet",icon:"cash-outline"},this.noMore=!1,this.planModel={},this.planData={},this.isRenew=!1,this.isPt=!1,this.isPTSessions=!1,this.currentDate=(new Date).toISOString(),this.profileService=(0,e.WQX)(D.p),this.route=(0,e.WQX)(P.nX),this.navCtrl=(0,e.WQX)(y.q9),this.global=(0,e.WQX)(u.d),this.renewService=(0,e.WQX)(g.L)}ngOnInit(){this.getId(),this.getData(),this.planSub=this.renewService.renewals.subscribe({next:n=>{console.log("plans data: ",n),this.plans=n},error:n=>{console.log(n)}}),this.getProfile()}getId(){const n=this.route.snapshot.paramMap.get("id");console.log(n),n||this.navCtrl.back(),this.id=n}getData(){var n=this;return(0,m.A)(function*(){try{n.global.showLoader();const o=yield n.renewService.getPlanHistory(n.id,5);(null==o?void 0:o.length)<5&&(n.noMore=!0),n.global.hideLoader()}catch(o){console.log(o),n.global.hideLoader(),n.global.checkMessageForErrorToast(o)}})()}getProfile(){var n=this;return(0,m.A)(function*(){n.profileSub=n.profileService.profile.subscribe({next:o=>{n.profile=o}});try{yield n.profileService.getProfile()}catch(o){console.log(o)}})()}loadMore(n){var o=this;return(0,m.A)(function*(){try{console.log(n);const i=yield o.renewService.getPlanHistory(o.id,5,!0);console.log(i),setTimeout(()=>{n.target.complete()},500)}catch(i){console.log(i),o.global.checkMessageForErrorToast(i)}})()}editPlan(n){this.planModel=n,"PT"==(null==n?void 0:n.type)?this.isPt=!0:this.isRenew=!0}deletePlanAlert(n){this.global.showAlert(`Are you sure you want to remove '${(null==n?void 0:n.plan_name)||(null==n?void 0:n.pt_plan_name)}'?`,"Confirm",[{text:"No",role:"cancel"},{text:"Yes",handler:()=>{this.deletePlan(n)}}])}deletePlan(n){var o=this;return(0,m.A)(function*(){try{const i=yield o.renewService.deleteRenewalPackage(null==n?void 0:n.id);console.log(i)}catch(i){console.log(i),o.global.checkMessageForErrorToast(i)}})()}renewalModalDismiss(n,o){o.dismiss()}renewalPtModalDismiss(n,o){o.dismiss()}showSessions(n){this.planData=n,this.isPTSessions=!0}ptSessionsModalDismiss(n,o){o.dismiss()}ngOnDestroy(){this.planSub&&this.planSub.unsubscribe(),this.renewService.resetPlans(),this.profileSub&&this.profileSub.unsubscribe()}}return(s=r).\u0275fac=function(n){return new(n||s)},s.\u0275cmp=e.VBU({type:s,selectors:[["app-plan-history"]],standalone:!0,features:[e.aNF],decls:21,vars:5,consts:[["renew_modal",""],["renew_pt_modal",""],["sessions_modal",""],["slot","start"],[3,"defaultHref"],[3,"model"],[3,"ionInfinite"],[3,"didDismiss","isOpen"],["mode","ios"],["slot","end","fill","clear"],["lines","none"],["slot","end","fill","clear",3,"click"],["name","create-outline","slot","icon-only","color","tertiary"],["slot","end","color","success"],["color","light","expand","block","size","small",3,"click","strong"],["slot","start","name","eye-outline"],["color","tertiary"],[3,"close","plan"],[3,"close","plan","profile"]],template:function(n,o){if(1&n){const i=e.RV6();e.j41(0,"ion-header")(1,"ion-toolbar")(2,"ion-title"),e.EFF(3,"Plans history"),e.k0s(),e.j41(4,"ion-buttons",3),e.nrm(5,"ion-back-button",4),e.k0s()()(),e.j41(6,"ion-content"),e.Z7z(7,N,6,4,"ion-card",null,e.Vm6,!1,V,1,1,"app-empty-screen",5),e.j41(10,"ion-infinite-scroll",6),e.bIt("ionInfinite",function(S){return e.eBV(i),e.Njj(o.loadMore(S))}),e.nrm(11,"ion-infinite-scroll-content"),e.k0s(),e.j41(12,"ion-modal",7,0),e.bIt("didDismiss",function(){return e.eBV(i),e.Njj(o.isRenew=!1)}),e.DNE(14,w,1,1,"ng-template"),e.k0s(),e.j41(15,"ion-modal",7,1),e.bIt("didDismiss",function(){return e.eBV(i),e.Njj(o.isPt=!1)}),e.DNE(17,A,1,1,"ng-template"),e.k0s(),e.j41(18,"ion-modal",7,2),e.bIt("didDismiss",function(){return e.eBV(i),e.Njj(o.isPTSessions=!1)}),e.DNE(20,Y,1,2,"ng-template"),e.k0s()()}2&n&&(e.R7$(5),e.Y8G("defaultHref","/tabs/students/"+o.id),e.R7$(2),e.Dyx(o.plans),e.R7$(5),e.Y8G("isOpen",o.isRenew),e.R7$(3),e.Y8G("isOpen",o.isPt),e.R7$(3),e.Y8G("isOpen",o.isPTSessions))},dependencies:[l.Jm,l.Sb,l.iq,l.Hp,l.Ax,l.Dg,l.IO,l.he,l.uz,l.b_,l.el,l.QW,l.W9,l.eU,l.BC,l.ai,d.vh,p.V,f.i,b.X,_.X,R],styles:["ion-item[_ngcontent-%COMP%]   ion-label[_ngcontent-%COMP%], ion-item[_ngcontent-%COMP%]   ion-text[_ngcontent-%COMP%]{font-size:.9rem}ion-item[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:.8rem;margin-top:5px}"]}),r})()}}]);