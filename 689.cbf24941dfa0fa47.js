"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[689],{8655:(C,E,c)=>{c.d(E,{V:()=>b});var k=c(177),e=c(5239),t=c(3953);const g=r=>({transform:r});function s(r,v){if(1&r&&(t.j41(0,"ion-text")(1,"p"),t.EFF(2),t.k0s()()),2&r){const y=t.XpG();t.R7$(2),t.JRh(y.model.subTitle)}}let b=(()=>{var r;class v{constructor(){this.fontSize="18rem",this.isMargin="translateY(10vh)"}ngOnInit(){}}return(r=v).\u0275fac=function(f){return new(f||r)},r.\u0275cmp=t.VBU({type:r,selectors:[["app-empty-screen"]],inputs:{model:"model",fontSize:"fontSize",isMargin:"isMargin"},standalone:!0,features:[t.aNF],decls:9,vars:9,consts:[[3,"ngStyle"],[1,"ion-text-center"],[3,"name","color"],[4,"ngIf"]],template:function(f,m){1&f&&(t.j41(0,"ion-grid",0)(1,"ion-row")(2,"ion-col",1),t.nrm(3,"ion-icon",2),t.k0s()(),t.j41(4,"ion-row")(5,"ion-col",1)(6,"ion-label"),t.EFF(7),t.k0s(),t.DNE(8,s,3,1,"ion-text",3),t.k0s()()()),2&f&&(t.Y8G("ngStyle",t.eq3(7,g,m.model.noSpace?"0vh":m.isMargin)),t.R7$(3),t.xc7("font-size",m.fontSize),t.Y8G("name",m.model.icon)("color",m.model.color?m.model.color:"tertiary"),t.R7$(4),t.SpI(" ",m.model.title," "),t.R7$(),t.Y8G("ngIf",null==m.model?null:m.model.subTitle))},dependencies:[e.lO,e.ln,e.hU,e.iq,e.he,e.IO,k.bT,k.B3]}),v})()},5689:(C,E,c)=>{c.r(E),c.d(E,{GymPackagesPage:()=>R});var k=c(467),e=c(3953),t=c(9967),g=c(4341),s=c(5239),b=c(5079),r=c(5873),v=c(8655),y=c(9642),f=c(3202);const m=()=>[.5,.9,1];function S(l,p){if(1&l){const i=e.RV6();e.j41(0,"ion-item",7)(1,"ion-label"),e.EFF(2),e.j41(3,"p")(4,"ion-text",11),e.EFF(5),e.k0s()()(),e.j41(6,"ion-button",12),e.bIt("click",function(){const o=e.eBV(i).$implicit,n=e.XpG();return e.Njj(n.editPackage(o))}),e.nrm(7,"ion-icon",13),e.k0s(),e.j41(8,"ion-button",14),e.bIt("click",function(){const o=e.eBV(i).$implicit,n=e.XpG();return e.Njj(n.deletePackage(o))}),e.nrm(9,"ion-icon",15),e.k0s()()}if(2&l){const i=p.$implicit;e.R7$(2),e.SpI(" ",null==i?null:i.name," "),e.R7$(3),e.SpI(" \u20b9",null==i?null:i.amount," ")}}function D(l,p){if(1&l&&e.nrm(0,"app-empty-screen",8),2&l){const i=e.XpG();e.Y8G("model",i.emptyModel)}}function G(l,p){if(1&l&&(e.j41(0,"ion-button",21)(1,"ion-text"),e.EFF(2,"SAVE"),e.k0s()()),2&l){e.XpG();const i=e.sdS(7);e.Y8G("disabled",!i.valid)}}function O(l,p){1&l&&(e.j41(0,"ion-button",22),e.nrm(1,"ion-spinner",23),e.k0s())}function I(l,p){if(1&l){const i=e.RV6();e.j41(0,"ion-header")(1,"ion-toolbar")(2,"ion-title"),e.EFF(3),e.k0s()()(),e.j41(4,"ion-content")(5,"div",16)(6,"form",17,1),e.bIt("ngSubmit",function(){e.eBV(i);const o=e.sdS(7),n=e.XpG(),_=e.sdS(16);return e.Njj(n.save(o,_))}),e.j41(8,"ion-input",18),e.mxI("ngModelChange",function(o){e.eBV(i);const n=e.XpG();return e.DH7(n.packageModel.name,o)||(n.packageModel.name=o),e.Njj(o)}),e.k0s(),e.j41(9,"ion-input",19),e.mxI("ngModelChange",function(o){e.eBV(i);const n=e.XpG();return e.DH7(n.packageModel.months,o)||(n.packageModel.months=o),e.Njj(o)}),e.k0s(),e.j41(10,"ion-input",20),e.mxI("ngModelChange",function(o){e.eBV(i);const n=e.XpG();return e.DH7(n.packageModel.amount,o)||(n.packageModel.amount=o),e.Njj(o)}),e.k0s(),e.j41(11,"div",7),e.DNE(12,G,3,1,"ion-button",21)(13,O,2,0,"ion-button",22),e.k0s()()()()}if(2&l){const i=e.XpG();e.R7$(3),e.SpI("",null!=i.packageModel&&i.packageModel.name?"Edit":"Add"," Gym Package"),e.R7$(5),e.R50("ngModel",i.packageModel.name),e.R7$(),e.R50("ngModel",i.packageModel.months),e.R7$(),e.R50("ngModel",i.packageModel.amount),e.R7$(2),e.vxM(i.isSave?13:12)}}let R=(()=>{var l;class p{constructor(){this.packages=[],this.isAddPackage=!1,this.packageModel={},this.isSave=!1,this.emptyModel={title:"No packages added yet",icon:"cash-outline"},this.apiService=(0,e.WQX)(y.G),this.global=(0,e.WQX)(f.d),(0,b.a)({createOutline:r.hmR,addCircle:r.YH_,trashOutline:r.P1A})}ngOnInit(){this.getPackages()}getPackages(a){var o=this;return(0,k.A)(function*(){try{const n=o.apiService.collectionFirestoreRef("gym_fee_packages");let _=(0,t.P)(n,o.apiService.limitQuery(10));o.lastVisible&&a&&(_=(0,t.P)(_,o.apiService.startAfterQuery(o.lastVisible)));const d=yield o.apiService.getDocsByQuery(_);o.lastVisible=d.docs[d.docs.length-1],console.log("last",o.lastVisible);const M=yield d.docs.map(h=>{let u=h.data();return u.id=h.id,u});console.log("packages",M);let P=o.packages;P=P.concat(M),o.packages=P}catch(n){console.log(n),o.global.checkMessageForErrorToast(n)}})()}loadMore(a){var o=this;return(0,k.A)(function*(){try{console.log(a);const n=yield o.getPackages(!0);console.log(n),setTimeout(()=>{a.target.complete()},500)}catch(n){console.log(n),o.global.checkMessageForErrorToast(n)}})()}editPackage(a){this.isAddPackage=!0,this.packageModel=a}reset(){this.isAddPackage=!1,this.packageModel={}}save(a,o){var n=this;return(0,k.A)(function*(){try{var _;if(!a.valid)return;if(n.isSave=!0,n.packageModel={...n.packageModel,...a.value},null!==(_=n.packageModel)&&void 0!==_&&_.id){var d,M,P,h;const u=yield n.apiService.updateDocument(`gym_fee_packages/${null===(d=n.packageModel)||void 0===d?void 0:d.id}`,{name:null===(M=n.packageModel)||void 0===M?void 0:M.name,amount:null===(P=n.packageModel)||void 0===P?void 0:P.amount,months:null===(h=n.packageModel)||void 0===h?void 0:h.months});console.log(u);const T=n.packages.findIndex(B=>{var j;return B.id==(null===(j=n.packageModel)||void 0===j?void 0:j.id)});n.packages[T]={...n.packageModel}}else{const T={id:(yield n.apiService.addDocument("gym_fee_packages",{...n.packageModel})).id,...n.packageModel};n.packages=n.packages.concat(T)}n.isSave=!1,o.dismiss()}catch(u){console.log(u),n.isSave=!1,n.global.checkMessageForErrorToast(u)}})()}deletePackage(a){this.global.showAlert(`Are you sure you want to exclude '${null==a?void 0:a.name}' from the list?`,"Confirm",[{text:"No",role:"cancel"},{text:"Yes",handler:()=>{this.removePackage(a)}}])}removePackage(a){var o=this;return(0,k.A)(function*(){try{o.global.showLoader();const n=yield o.apiService.deleteDocument(`gym_fee_packages/${null==a?void 0:a.id}`);console.log(n),o.packages=o.packages.filter(_=>_.id!=(null==a?void 0:a.id)),o.global.hideLoader()}catch(n){console.log(n),o.global.hideLoader(),o.global.checkMessageForErrorToast(n)}})()}}return(l=p).\u0275fac=function(a){return new(a||l)},l.\u0275cmp=e.VBU({type:l,selectors:[["app-gym-packages"]],standalone:!0,features:[e.aNF],decls:18,vars:5,consts:[["add_package_modal",""],["f","ngForm"],["color","secondary"],["slot","start"],["slot","end"],["color","primary",3,"click"],["slot","icon-only","name","add-circle"],[1,"ion-margin-top"],[3,"model"],[3,"ionInfinite"],[3,"didDismiss","isOpen","breakpoints","initialBreakpoint"],["color","tertiary"],["fill","clear","slot","end","color","tertiary",3,"click"],["name","create-outline"],["fill","clear","slot","end","color","danger",3,"click"],["name","trash-outline"],[1,"ion-margin"],[3,"ngSubmit"],["label","","placeholder","Name","name","name","required","","errorText","* Please enter the package name",1,"ion-margin-top",3,"ngModelChange","ngModel"],["label","","placeholder","Number of Months","name","months","type","number","required","","errorText","* Please enter the no. of months",1,"ion-margin-vertical",3,"ngModelChange","ngModel"],["label","","placeholder","Amount","name","amount","type","number","required","","errorText","* Please enter the package amount",1,"ion-margin-vertical",3,"ngModelChange","ngModel"],["expand","block","shape","round","size","large","color","tertiary","type","submit",3,"disabled"],["expand","block","shape","round","size","large","color","tertiary","type","button"],["name","crescent","color","light"]],template:function(a,o){if(1&a){const n=e.RV6();e.j41(0,"ion-header")(1,"ion-toolbar",2)(2,"ion-title"),e.EFF(3,"Gym packages"),e.k0s(),e.j41(4,"ion-buttons",3),e.nrm(5,"ion-menu-button"),e.k0s(),e.j41(6,"ion-buttons",4)(7,"ion-button",5),e.bIt("click",function(){return e.eBV(n),e.Njj(o.isAddPackage=!0)}),e.nrm(8,"ion-icon",6),e.k0s()()()(),e.j41(9,"ion-content"),e.Z7z(10,S,10,2,"ion-item",7,e.Vm6,!1,D,1,1,"app-empty-screen",8),e.j41(13,"ion-infinite-scroll",9),e.bIt("ionInfinite",function(d){return e.eBV(n),e.Njj(o.loadMore(d))}),e.nrm(14,"ion-infinite-scroll-content"),e.k0s(),e.j41(15,"ion-modal",10,0),e.bIt("didDismiss",function(){return e.eBV(n),e.Njj(o.reset())}),e.DNE(17,I,14,5,"ng-template"),e.k0s()()}2&a&&(e.R7$(10),e.Dyx(o.packages),e.R7$(5),e.Y8G("isOpen",o.isAddPackage)("breakpoints",e.lJ4(4,m))("initialBreakpoint",.5))},dependencies:[s.w2,s.IO,s.$w,s.Sb,s.Hp,s.Ax,s.he,s.uz,s.Jm,s.iq,s.QW,s.W9,s.eU,s.BC,s.ai,s.MC,v.V,g.YN,g.qT,g.BC,g.cb,g.YS,g.vS,g.cV],styles:["ion-item[_ngcontent-%COMP%]   ion-label[_ngcontent-%COMP%]{font-size:1rem}ion-item[_ngcontent-%COMP%]   ion-label[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:.95rem;font-weight:700;margin-top:5px}"]}),p})()}}]);