"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[425],{8655:(j,E,r)=>{r.d(E,{V:()=>b});var u=r(177),e=r(5239),i=r(3953);const m=g=>({transform:g});function s(g,y){if(1&g&&(i.j41(0,"ion-text")(1,"p"),i.EFF(2),i.k0s()()),2&g){const M=i.XpG();i.R7$(2),i.JRh(M.model.subTitle)}}let b=(()=>{var g;class y{constructor(){this.fontSize="18rem",this.isMargin="translateY(10vh)"}ngOnInit(){}}return(g=y).\u0275fac=function(h){return new(h||g)},g.\u0275cmp=i.VBU({type:g,selectors:[["app-empty-screen"]],inputs:{model:"model",fontSize:"fontSize",isMargin:"isMargin"},standalone:!0,features:[i.aNF],decls:9,vars:9,consts:[[3,"ngStyle"],[1,"ion-text-center"],[3,"name","color"],[4,"ngIf"]],template:function(h,_){1&h&&(i.j41(0,"ion-grid",0)(1,"ion-row")(2,"ion-col",1),i.nrm(3,"ion-icon",2),i.k0s()(),i.j41(4,"ion-row")(5,"ion-col",1)(6,"ion-label"),i.EFF(7),i.k0s(),i.DNE(8,s,3,1,"ion-text",3),i.k0s()()()),2&h&&(i.Y8G("ngStyle",i.eq3(7,m,_.model.noSpace?"0vh":_.isMargin)),i.R7$(3),i.xc7("font-size",_.fontSize),i.Y8G("name",_.model.icon)("color",_.model.color?_.model.color:"tertiary"),i.R7$(4),i.SpI(" ",_.model.title," "),i.R7$(),i.Y8G("ngIf",null==_.model?null:_.model.subTitle))},dependencies:[e.lO,e.ln,e.hU,e.iq,e.he,e.IO,u.bT,u.B3]}),y})()},2425:(j,E,r)=>{r.r(E),r.d(E,{PtPackagesPage:()=>x});var u=r(467),e=r(3953),i=r(9967),m=r(4341),s=r(5239),b=r(5079),g=r(5873),y=r(8655),M=r(9642),h=r(3202);const _=()=>[.3,.7,.9,1];function D(l,p){if(1&l){const a=e.RV6();e.j41(0,"ion-item",8)(1,"ion-label"),e.EFF(2),e.j41(3,"p"),e.EFF(4),e.k0s(),e.j41(5,"p")(6,"ion-text",12),e.EFF(7),e.k0s()()(),e.j41(8,"ion-button",13),e.bIt("click",function(){const n=e.eBV(a).$implicit,t=e.XpG();return e.Njj(t.editPackage(n))}),e.nrm(9,"ion-icon",14),e.k0s(),e.j41(10,"ion-button",15),e.bIt("click",function(){const n=e.eBV(a).$implicit,t=e.XpG();return e.Njj(t.deletePackage(n))}),e.nrm(11,"ion-icon",16),e.k0s()()}if(2&l){const a=p.$implicit,o=e.XpG();e.R7$(2),e.Lme(" ",null==a?null:a.name," (",o.getCategory(a),") "),e.R7$(2),e.Lme("",null==a?null:a.sessions," sessions for ",null==a?null:a.duration," days"),e.R7$(3),e.SpI(" \u20b9",null==a?null:a.amount," ")}}function R(l,p){if(1&l&&e.nrm(0,"app-empty-screen",9),2&l){const a=e.XpG();e.Y8G("model",a.emptyModel)}}function S(l,p){if(1&l&&(e.j41(0,"ion-select-option",21),e.EFF(1),e.k0s()),2&l){const a=p.$implicit;e.Y8G("value",null==a?null:a.id),e.R7$(),e.JRh(null==a?null:a.name)}}function O(l,p){if(1&l&&(e.j41(0,"ion-button",27)(1,"ion-text"),e.EFF(2,"SAVE"),e.k0s()()),2&l){e.XpG();const a=e.sdS(7);e.Y8G("disabled",!a.valid)}}function F(l,p){1&l&&(e.j41(0,"ion-button",28),e.nrm(1,"ion-spinner",29),e.k0s())}function I(l,p){if(1&l){const a=e.RV6();e.j41(0,"ion-header")(1,"ion-toolbar")(2,"ion-title"),e.EFF(3),e.k0s()()(),e.j41(4,"ion-content")(5,"div",17)(6,"form",18,1),e.bIt("ngSubmit",function(){e.eBV(a);const n=e.sdS(7),t=e.XpG(),c=e.sdS(18);return e.Njj(t.save(n,c))}),e.j41(8,"div",19)(9,"ion-select",20),e.mxI("ngModelChange",function(n){e.eBV(a);const t=e.XpG();return e.DH7(t.packageModel.category,n)||(t.packageModel.category=n),e.Njj(n)}),e.Z7z(10,S,2,2,"ion-select-option",21,e.Vm6),e.k0s()(),e.j41(12,"ion-input",22),e.mxI("ngModelChange",function(n){e.eBV(a);const t=e.XpG();return e.DH7(t.packageModel.name,n)||(t.packageModel.name=n),e.Njj(n)}),e.k0s(),e.j41(13,"ion-input",23),e.mxI("ngModelChange",function(n){e.eBV(a);const t=e.XpG();return e.DH7(t.packageModel.sessions,n)||(t.packageModel.sessions=n),e.Njj(n)}),e.j41(14,"div",4),e.EFF(15,"sessions"),e.k0s()(),e.j41(16,"ion-input",24),e.mxI("ngModelChange",function(n){e.eBV(a);const t=e.XpG();return e.DH7(t.packageModel.duration,n)||(t.packageModel.duration=n),e.Njj(n)}),e.j41(17,"div",4),e.EFF(18,"days"),e.k0s()(),e.j41(19,"ion-input",25),e.mxI("ngModelChange",function(n){e.eBV(a);const t=e.XpG();return e.DH7(t.packageModel.amount,n)||(t.packageModel.amount=n),e.Njj(n)}),e.k0s(),e.j41(20,"div",26),e.DNE(21,O,3,1,"ion-button",27)(22,F,2,0,"ion-button",28),e.k0s()()()()}if(2&l){const a=e.XpG();e.R7$(3),e.SpI("",null!=a.packageModel&&a.packageModel.name?"Edit":"Add"," PT Package"),e.R7$(6),e.R50("ngModel",a.packageModel.category),e.R7$(),e.Dyx(a.categories),e.R7$(2),e.R50("ngModel",a.packageModel.name),e.R7$(),e.R50("ngModel",a.packageModel.sessions),e.R7$(3),e.R50("ngModel",a.packageModel.duration),e.R7$(3),e.R50("ngModel",a.packageModel.amount),e.R7$(2),e.vxM(a.isSave?22:21)}}let x=(()=>{var l;class p{constructor(){this.packages=[],this.categories=[],this.isAddPackage=!1,this.packageModel={},this.isSave=!1,this.emptyModel={title:"No packages added yet",icon:"briefcase-outline"},this.apiService=(0,e.WQX)(M.G),this.global=(0,e.WQX)(h.d),(0,b.a)({createOutline:g.hmR,addCircle:g.YH_,trashOutline:g.P1A})}ngOnInit(){this.getPackages(),this.getCategories()}getPackages(o){var n=this;return(0,u.A)(function*(){try{const t=n.apiService.collectionFirestoreRef("pt_packages");let c=(0,i.P)(t,n.apiService.limitQuery(10));n.lastVisible&&o&&(c=(0,i.P)(c,n.apiService.startAfterQuery(n.lastVisible)));const d=yield n.apiService.getDocsByQuery(c);n.lastVisible=d.docs[d.docs.length-1],console.log("last",n.lastVisible);const f=yield d.docs.map(v=>{let P=v.data();return P.id=v.id,P});console.log("packages",f);let k=n.packages;k=k.concat(f),n.packages=k}catch(t){console.log(t),n.global.checkMessageForErrorToast(t)}})()}loadMore(o){var n=this;return(0,u.A)(function*(){try{console.log(o);const t=yield n.getPackages(!0);console.log(t),setTimeout(()=>{o.target.complete()},500)}catch(t){console.log(t),n.global.checkMessageForErrorToast(t)}})()}getCategory(o){const n=this.categories.find(t=>t.id==o.category);return null==n?void 0:n.name}editPackage(o){var n;this.isAddPackage=!0,o&&(this.packageModel=o),0==(null===(n=this.categories)||void 0===n?void 0:n.length)&&this.getCategories()}getCategories(){var o=this;return(0,u.A)(function*(){try{const t=yield(yield o.apiService.getDocs("pt_package_categories")).docs.map(c=>{let d=c.data();return d.id=c.id,d});console.log("pt_categories",t),o.categories=t}catch(n){console.log(n),o.global.checkMessageForErrorToast(n)}})()}reset(){this.isAddPackage=!1,this.packageModel={}}goToCategories(){this.categories=[],this.global.navigate(["/","pt-packages","pt-categories"])}save(o,n){var t=this;return(0,u.A)(function*(){try{var c;if(!o.valid)return;if(t.isSave=!0,t.packageModel={...t.packageModel,...o.value},null!==(c=t.packageModel)&&void 0!==c&&c.id){var d,f,k,v;const P=yield t.apiService.updateDocument(`pt_packages/${null===(d=t.packageModel)||void 0===d?void 0:d.id}`,{name:null===(f=t.packageModel)||void 0===f?void 0:f.name,amount:null===(k=t.packageModel)||void 0===k?void 0:k.amount,duration:null===(v=t.packageModel)||void 0===v?void 0:v.duration});console.log(P);const C=t.packages.findIndex(B=>{var T;return B.id==(null===(T=t.packageModel)||void 0===T?void 0:T.id)});t.packages[C]={...t.packageModel}}else{const C={id:(yield t.apiService.addDocument("pt_packages",{...t.packageModel})).id,...t.packageModel};t.packages=t.packages.concat(C)}t.isSave=!1,n.dismiss()}catch(P){console.log(P),t.isSave=!1,t.global.checkMessageForErrorToast(P)}})()}deletePackage(o){this.global.showAlert(`Are you sure you want to exclude '${null==o?void 0:o.name}' from the list?`,"Confirm",[{text:"No",role:"cancel"},{text:"Yes",handler:()=>{this.removePackage(o)}}])}removePackage(o){var n=this;return(0,u.A)(function*(){try{n.global.showLoader();const t=yield n.apiService.deleteDocument(`pt_packages/${null==o?void 0:o.id}`);console.log(t),n.packages=n.packages.filter(c=>c.id!=(null==o?void 0:o.id)),n.global.hideLoader()}catch(t){console.log(t),n.global.hideLoader(),n.global.checkMessageForErrorToast(t)}})()}}return(l=p).\u0275fac=function(o){return new(o||l)},l.\u0275cmp=e.VBU({type:l,selectors:[["app-pt-packages"]],standalone:!0,features:[e.aNF],decls:20,vars:5,consts:[["add_package_modal",""],["f","ngForm"],["color","secondary"],["slot","start"],["slot","end"],["color","primary",3,"click"],["slot","icon-only","name","add-circle"],["expand","block",1,"ion-padding",3,"click"],[1,"ion-margin-top"],[3,"model"],[3,"ionInfinite"],[3,"didDismiss","isOpen","breakpoints","initialBreakpoint"],["color","tertiary"],["fill","clear","slot","end","color","tertiary",3,"click"],["name","create-outline"],["fill","clear","slot","end","color","danger",3,"click"],["name","trash-outline"],[1,"ion-margin"],[3,"ngSubmit"],[1,"col-input"],["label","CATEGORY (optional)","labelPlacement","floating","name","category","interface","popover","placeholder","Select Category",3,"ngModelChange","ngModel"],[3,"value"],["label","","placeholder","Name","name","name","required","","errorText","* Please enter the package name",1,"ion-margin-top",3,"ngModelChange","ngModel"],["label","","placeholder","Sessions","name","sessions","required","","errorText","* Please enter the number of sessions",1,"ion-margin-top",3,"ngModelChange","ngModel"],["label","","placeholder","Duration","name","duration","required","","errorText","* Please enter the duration of days",1,"ion-margin-top",3,"ngModelChange","ngModel"],["label","","placeholder","Amount","name","amount","type","number","required","","errorText","* Please enter the package amount",1,"ion-margin-vertical",3,"ngModelChange","ngModel"],[1,"ion-padding-top"],["expand","block","shape","round","size","large","color","tertiary","type","submit",3,"disabled"],["expand","block","shape","round","size","large","color","tertiary","type","button"],["name","crescent","color","light"]],template:function(o,n){if(1&o){const t=e.RV6();e.j41(0,"ion-header")(1,"ion-toolbar",2)(2,"ion-title"),e.EFF(3,"PT packages"),e.k0s(),e.j41(4,"ion-buttons",3),e.nrm(5,"ion-menu-button"),e.k0s(),e.j41(6,"ion-buttons",4)(7,"ion-button",5),e.bIt("click",function(){return e.eBV(t),e.Njj(n.editPackage())}),e.nrm(8,"ion-icon",6),e.k0s()()()(),e.j41(9,"ion-content")(10,"ion-button",7),e.bIt("click",function(){return e.eBV(t),e.Njj(n.goToCategories())}),e.EFF(11,"View PT Categories "),e.k0s(),e.Z7z(12,D,12,5,"ion-item",8,e.Vm6,!1,R,1,1,"app-empty-screen",9),e.j41(15,"ion-infinite-scroll",10),e.bIt("ionInfinite",function(d){return e.eBV(t),e.Njj(n.loadMore(d))}),e.nrm(16,"ion-infinite-scroll-content"),e.k0s(),e.j41(17,"ion-modal",11,0),e.bIt("didDismiss",function(){return e.eBV(t),e.Njj(n.reset())}),e.DNE(19,I,23,7,"ng-template"),e.k0s()()}2&o&&(e.R7$(12),e.Dyx(n.packages),e.R7$(5),e.Y8G("isOpen",n.isAddPackage)("breakpoints",e.lJ4(4,_))("initialBreakpoint",.7))},dependencies:[s.Nm,s.Ip,s.w2,s.IO,s.$w,s.Sb,s.Hp,s.Ax,s.he,s.uz,s.Jm,s.iq,s.QW,s.W9,s.eU,s.BC,s.ai,s.MC,y.V,m.YN,m.qT,m.BC,m.cb,m.YS,m.vS,m.cV],styles:["ion-item[_ngcontent-%COMP%]   ion-label[_ngcontent-%COMP%]{font-size:1rem}ion-item[_ngcontent-%COMP%]   ion-label[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:.95rem;font-weight:700;margin-top:5px}.col-input[_ngcontent-%COMP%]{border:1px solid lightgray;border-radius:8px}.col-input[_ngcontent-%COMP%]   ion-select[_ngcontent-%COMP%]{padding:0 10px}"]}),p})()}}]);