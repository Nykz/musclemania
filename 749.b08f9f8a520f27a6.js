"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[749],{8655:(E,p,s)=>{s.d(p,{V:()=>a});var u=s(177),t=s(5239),e=s(3953);const _=r=>({transform:r});function f(r,h){if(1&r&&(e.j41(0,"ion-text")(1,"p"),e.EFF(2),e.k0s()()),2&r){const b=e.XpG();e.R7$(2),e.JRh(b.model.subTitle)}}let a=(()=>{var r;class h{constructor(){this.fontSize="18rem",this.isMargin="translateY(10vh)"}ngOnInit(){}}return(r=h).\u0275fac=function(g){return new(g||r)},r.\u0275cmp=e.VBU({type:r,selectors:[["app-empty-screen"]],inputs:{model:"model",fontSize:"fontSize",isMargin:"isMargin"},standalone:!0,features:[e.aNF],decls:9,vars:9,consts:[[3,"ngStyle"],[1,"ion-text-center"],[3,"name","color"],[4,"ngIf"]],template:function(g,d){1&g&&(e.j41(0,"ion-grid",0)(1,"ion-row")(2,"ion-col",1),e.nrm(3,"ion-icon",2),e.k0s()(),e.j41(4,"ion-row")(5,"ion-col",1)(6,"ion-label"),e.EFF(7),e.k0s(),e.DNE(8,f,3,1,"ion-text",3),e.k0s()()()),2&g&&(e.Y8G("ngStyle",e.eq3(7,_,d.model.noSpace?"0vh":d.isMargin)),e.R7$(3),e.xc7("font-size",d.fontSize),e.Y8G("name",d.model.icon)("color",d.model.color?d.model.color:"tertiary"),e.R7$(4),e.SpI(" ",d.model.title," "),e.R7$(),e.Y8G("ngIf",null==d.model?null:d.model.subTitle))},dependencies:[t.lO,t.ln,t.hU,t.iq,t.he,t.IO,u.bT,u.B3]}),h})()},749:(E,p,s)=>{s.r(p),s.d(p,{BatchPage:()=>P});var u=s(467),t=s(3953),e=s(5239),_=s(8655),f=s(3202),a=s(4341),r=s(7213);function h(i,m){1&i&&t.nrm(0,"ion-datetime",16),2&i&&t.Y8G("showDefaultButtons",!0)}function b(i,m){1&i&&t.nrm(0,"ion-datetime",17),2&i&&t.Y8G("showDefaultButtons",!0)}function g(i,m){if(1&i){const l=t.RV6();t.j41(0,"ion-button",18),t.bIt("click",function(){t.eBV(l);const o=t.XpG();return t.Njj(o.onSubmit())}),t.j41(1,"ion-text"),t.EFF(2,"SAVE"),t.k0s()()}}function d(i,m){1&i&&(t.j41(0,"ion-button",15),t.nrm(1,"ion-spinner",19),t.k0s())}let T=(()=>{var i;class m{constructor(){this.isSave=!1,this.close=new t.bkB,this.batchService=(0,t.WQX)(r.k),this.global=(0,t.WQX)(f.d)}ngOnInit(){this.initForm()}initForm(){var n,o,c,v,B;this.form=new a.gE({name:new a.MJ((null===(n=this.model)||void 0===n?void 0:n.name)||null,{validators:[a.k0.required]}),start_time:new a.MJ(null!==(o=this.model)&&void 0!==o&&o.start_time?this.global.toIsoDateTime(new Date(null===(c=this.model)||void 0===c?void 0:c.start_time)):null,{validators:[a.k0.required]}),end_time:new a.MJ(null!==(v=this.model)&&void 0!==v&&v.end_time?this.global.toIsoDateTime(new Date(null===(B=this.model)||void 0===B?void 0:B.end_time)):null,{validators:[a.k0.required]})})}dismiss(n){this.close.emit(n)}onSubmit(){this.form.valid?this.save():this.form.markAllAsTouched()}save(){var n=this;return(0,u.A)(function*(){try{var o;n.isSave=!0,null!==(o=n.model)&&void 0!==o&&o.id?yield n.batchService.updateBatch(n.model.id,n.form.value):yield n.batchService.addBatch(n.form.value),n.isSave=!1,n.close.emit(!0)}catch(c){n.isSave=!1,console.log(c),n.global.checkMessageForErrorToast(c)}})()}}return(i=m).\u0275fac=function(n){return new(n||i)},i.\u0275cmp=t.VBU({type:i,selectors:[["app-edit-batch"]],inputs:{model:"model"},outputs:{close:"close"},standalone:!0,features:[t.aNF],decls:30,vars:6,consts:[["slot","start"],["color","primary",3,"click"],["name","arrow-back"],[3,"fullscreen"],[3,"formGroup"],[1,"form-row"],["sizeLg","6","sizeMd","6","sizeSm","12","sizeXl","6","sizeXs","12"],[1,"col-input"],["label","NAME","labelPlacement","floating","type","text","formControlName","name","errorText","* Please enter proper name."],["lines","none"],["slot","end","datetime","datetime"],[3,"keepContentsMounted"],["slot","end","datetime","datetime1"],[1,"ion-margin"],["expand","block","color","tertiary","size","large"],["expand","block","size","large","color","tertiary"],["id","datetime","presentation","time","locale","en-IN","hourCycle","h12","formControlName","start_time",3,"showDefaultButtons"],["id","datetime1","presentation","time","locale","en-IN","hourCycle","h12","formControlName","end_time",3,"showDefaultButtons"],["expand","block","color","tertiary","size","large",3,"click"],["name","crescent","color","light"]],template:function(n,o){1&n&&(t.j41(0,"ion-header")(1,"ion-toolbar")(2,"ion-title"),t.EFF(3),t.k0s(),t.j41(4,"ion-buttons",0)(5,"ion-button",1),t.bIt("click",function(){return o.dismiss()}),t.nrm(6,"ion-icon",2),t.k0s()()()(),t.j41(7,"ion-content",3)(8,"form",4)(9,"ion-row",5)(10,"ion-col",6)(11,"div",7),t.nrm(12,"ion-input",8),t.k0s()(),t.j41(13,"ion-col",6)(14,"ion-item",9)(15,"ion-label"),t.EFF(16,"Starting time"),t.k0s(),t.nrm(17,"ion-datetime-button",10),t.j41(18,"ion-modal",11),t.DNE(19,h,1,1,"ng-template"),t.k0s()()(),t.j41(20,"ion-col",6)(21,"ion-item",9)(22,"ion-label"),t.EFF(23,"Ending time"),t.k0s(),t.nrm(24,"ion-datetime-button",12),t.j41(25,"ion-modal",11),t.DNE(26,b,1,1,"ng-template"),t.k0s()()()()(),t.j41(27,"div",13),t.DNE(28,g,3,0,"ion-button",14)(29,d,2,0,"ion-button",15),t.k0s()()),2&n&&(t.R7$(3),t.SpI("",null!=o.model&&o.model.id?"Edit":"Add"," Batch"),t.R7$(4),t.Y8G("fullscreen",!0),t.R7$(),t.Y8G("formGroup",o.form),t.R7$(10),t.Y8G("keepContentsMounted",!0),t.R7$(7),t.Y8G("keepContentsMounted",!0),t.R7$(3),t.vxM(o.isSave?29:28))},dependencies:[e.w2,e.IO,e.A9,e.Sb,e.K4,e.hU,e.ln,e.he,e.uz,e.iq,e.Jm,e.QW,e.BC,e.ai,e.W9,e.eU,e.$w,a.X1,a.qT,a.BC,a.cb,a.j4,a.JD],styles:["ion-button[size=large][_ngcontent-%COMP%]   ion-text[_ngcontent-%COMP%]{font-size:1rem}"]}),m})();var C=s(9685),k=s(177),M=s(5079),y=s(5873);function S(i,m){if(1&i){const l=t.RV6();t.j41(0,"ion-item",6)(1,"ion-label")(2,"strong"),t.EFF(3),t.k0s(),t.j41(4,"p"),t.EFF(5),t.nI1(6,"timestampToDate"),t.nI1(7,"date"),t.nI1(8,"timestampToDate"),t.nI1(9,"date"),t.k0s()(),t.j41(10,"ion-button",10),t.bIt("click",function(){const o=t.eBV(l).$implicit,c=t.XpG();return t.Njj(c.editBatch(o))}),t.nrm(11,"ion-icon",11),t.k0s()()}if(2&i){const l=m.$implicit;t.R7$(3),t.JRh(null==l?null:l.name),t.R7$(2),t.Lme("",t.i5U(7,5,t.bMT(6,3,null==l?null:l.start_time),"hh:mm a")," - ",t.i5U(9,10,t.bMT(8,8,null==l?null:l.end_time),"hh:mm a"),"")}}function j(i,m){if(1&i&&t.nrm(0,"app-empty-screen",7),2&i){const l=t.XpG();t.Y8G("model",l.emptyModel)}}function D(i,m){if(1&i){const l=t.RV6();t.j41(0,"app-edit-batch",12),t.bIt("close",function(){t.eBV(l),t.XpG();const o=t.sdS(16);return t.Njj(o.dismiss())}),t.k0s()}if(2&i){const l=t.XpG();t.Y8G("model",l.batchModel)}}let P=(()=>{var i;class m{constructor(){this.batches=[],this.isAddBatch=!1,this.isSave=!1,this.emptyModel={title:"No batches added yet",icon:"bookmark-outline"},this.batchModel={},this.batchService=(0,t.WQX)(r.k),this.global=(0,t.WQX)(f.d),(0,M.a)({createOutline:y.hmR,addCircle:y.YH_})}ngOnInit(){this.getBatches(),this.batchSub=this.batchService.batches.subscribe({next:n=>{this.batches=n,console.log(this.batches)},error:n=>{console.log(n)}})}getBatches(){var n=this;return(0,u.A)(function*(){try{n.global.showLoader(),n.batches=yield n.batchService.getBatches(10),n.global.hideLoader()}catch(o){n.global.hideLoader(),console.log(o),n.global.checkMessageForErrorToast(o)}})()}loadMore(n){var o=this;return(0,u.A)(function*(){try{console.log(n);const c=yield o.batchService.getBatches(10,!0);console.log(c),setTimeout(()=>{n.target.complete()},500)}catch(c){console.log(c),o.global.checkMessageForErrorToast(c)}})()}editBatch(n){this.isAddBatch=!0,this.batchModel=n}reset(){this.isAddBatch=!1,this.batchModel={}}ngOnDestroy(){this.batchSub&&(this.batchSub.unsubscribe(),this.batchService.reset())}}return(i=m).\u0275fac=function(n){return new(n||i)},i.\u0275cmp=t.VBU({type:i,selectors:[["app-batch"]],standalone:!0,features:[t.aNF],decls:18,vars:2,consts:[["add_batch_modal",""],["color","secondary"],["slot","start"],["slot","end"],["color","primary",3,"click"],["slot","icon-only","name","add-circle"],[1,"ion-margin-top"],[3,"model"],[3,"ionInfinite"],[3,"didDismiss","isOpen"],["slot","end","fill","clear","color","tertiary",3,"click"],["name","create-outline","slot","icon-only"],[3,"close","model"]],template:function(n,o){if(1&n){const c=t.RV6();t.j41(0,"ion-header")(1,"ion-toolbar",1)(2,"ion-title"),t.EFF(3,"Batches"),t.k0s(),t.j41(4,"ion-buttons",2),t.nrm(5,"ion-menu-button"),t.k0s(),t.j41(6,"ion-buttons",3)(7,"ion-button",4),t.bIt("click",function(){return t.eBV(c),t.Njj(o.isAddBatch=!0)}),t.nrm(8,"ion-icon",5),t.k0s()()()(),t.j41(9,"ion-content"),t.Z7z(10,S,12,13,"ion-item",6,t.Vm6,!1,j,1,1,"app-empty-screen",7),t.j41(13,"ion-infinite-scroll",8),t.bIt("ionInfinite",function(B){return t.eBV(c),t.Njj(o.loadMore(B))}),t.nrm(14,"ion-infinite-scroll-content"),t.k0s(),t.j41(15,"ion-modal",9,0),t.bIt("didDismiss",function(){return t.eBV(c),t.Njj(o.reset())}),t.DNE(17,D,1,1,"ng-template"),t.k0s()()}2&n&&(t.R7$(10),t.Dyx(o.batches),t.R7$(5),t.Y8G("isOpen",o.isAddBatch))},dependencies:[e.Hp,e.Ax,e.he,e.uz,e.Sb,e.iq,e.Jm,e.QW,e.W9,e.eU,e.BC,e.ai,e.MC,_.V,T,C.i,k.vh],styles:["ion-item[_ngcontent-%COMP%]   ion-label[_ngcontent-%COMP%]{font-size:1rem}ion-item[_ngcontent-%COMP%]   ion-label[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:.85rem;margin-top:5px}"]}),m})()},9685:(E,p,s)=>{s.d(p,{i:()=>t});var u=s(3953);let t=(()=>{var e;class _{transform(a){return a?null!=a&&a.seconds?new Date(1e3*(a.seconds||0)+(a.nanoseconds||0)/1e6):a:null}}return(e=_).\u0275fac=function(a){return new(a||e)},e.\u0275pipe=u.EJ8({name:"timestampToDate",type:e,pure:!0,standalone:!0}),_})()}}]);