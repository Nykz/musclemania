"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[777],{8777:(A,g,d)=>{d.r(g),d.d(g,{AccountPage:()=>R});var p=d(467),_=d(177),n=d(3953),r=d(5239),b=d(8976),C=d(1339),f=d(3202),h=d(8509),c=d(4341);const v=["nameInput"];function M(i,a){1&i&&n.nrm(0,"ion-icon",16)}function w(i,a){1&i&&n.nrm(0,"ion-icon",16)}function O(i,a){1&i&&n.nrm(0,"ion-icon",16)}function k(i,a){if(1&i&&(n.j41(0,"ion-button",22),n.nrm(1,"ion-spinner",24),n.k0s()),2&i){n.XpG();const l=n.sdS(9);n.Y8G("disabled",!l.valid)}}function y(i,a){if(1&i&&(n.j41(0,"ion-button",23)(1,"ion-text"),n.EFF(2," UPDATE "),n.k0s()()),2&i){n.XpG();const l=n.sdS(9);n.Y8G("disabled",!l.valid)}}let S=(()=>{var i;class a{constructor(o,e){this.profileService=o,this.global=e,this.isSubmitted=!1,this.close=new n.bkB}ngOnInit(){setTimeout(()=>{this.nameInput.setFocus(),console.log("enter")},500)}dismiss(o){this.close.emit(o)}onSubmit(o){var e=this;return(0,p.A)(function*(){try{if(!o.valid)return;console.log(o.value),e.isSubmitted=!0,o.value.email==e.profile.email?(yield e.profileService.updateProfile(e.profile,o.value),e.isSubmitted=!1,e.dismiss()):e.presentPasswordPrompt(o.value)}catch(t){console.log("error: ",t),e.isSubmitted=!1,e.global.checkMessageForErrorToast(t)}})()}presentPasswordPrompt(o){this.global.showAlert("Please enter your password to change your email address","Verify",[{text:"Cancel",role:"cancel",handler:()=>{console.log("Confirm cancel"),this.isSubmitted=!1}},{text:"Verify",handler:e=>{console.log(e.password),this.isSubmitted=!1,""!=e.password.trim()&&e.password.length>=8?this.updateProfileWithEmail(o,e.password):this.global.errorToast("Password must be of atleast 8 characters")}}],[{name:"password",type:"password",placeholder:"Enter Password"}])}updateProfileWithEmail(o,e){var t=this;return(0,p.A)(function*(){try{yield t.profileService.updateProfileWithEmail(t.profile,o,e),t.dismiss()}catch(s){let u=null;"auth/email-already-in-use"==s.code&&(u="User with this email already exists. Try with different email address"),console.log("error: ",s),t.isSubmitted=!1,t.global.checkMessageForErrorToast(s,u)}})()}}return(i=a).\u0275fac=function(o){return new(o||i)(n.rXU(h.p),n.rXU(f.d))},i.\u0275cmp=n.VBU({type:i,selectors:[["app-edit-profile"]],viewQuery:function(o,e){if(1&o&&n.GBs(v,5),2&o){let t;n.mGM(t=n.lsd())&&(e.nameInput=t.first)}},inputs:{profile:"profile"},outputs:{close:"close"},standalone:!0,features:[n.aNF],decls:31,vars:8,consts:[["f","ngForm"],["nameInput","","name","ngModel"],["phoneInput","","phone","ngModel"],["email","ngModel"],[1,"ion-no-border"],["mode","ios"],["color","dark",1,"ion-text-left"],["slot","end"],["fill","clear","color","dark",3,"click"],["name","close-outline","slot","icon-only"],[3,"fullscreen"],[3,"ngSubmit"],[1,"ion-padding-horizontal","ion-margin-vertical"],[1,"ion-margin-vertical"],["label","NAME","labelPlacement","floating","type","text","required","","name","name",3,"ngModel"],["name","person","slot","start","color","medium"],["name","checkmark-sharp","slot","end","color","primary"],["label","PHONE NUMBER","labelPlacement","floating","type","tel","minlength","10","maxlength","10","required","","name","phone",3,"ngModel"],["name","call","slot","start","color","medium"],["label","EMAIL ADDRESS","labelPlacement","floating","type","email","required","","name","email",3,"ngModel"],["name","mail","slot","start","color","medium"],[1,"ion-padding","ion-text-center","submitButton"],["color","primary",3,"disabled"],["expand","block","size","large","type","submit","color","primary",3,"disabled"],["name","crescent"]],template:function(o,e){if(1&o){const t=n.RV6();n.j41(0,"ion-header",4)(1,"ion-toolbar",5)(2,"ion-title",6),n.EFF(3,"EDIT PROFILE"),n.k0s(),n.j41(4,"ion-buttons",7)(5,"ion-button",8),n.bIt("click",function(){return n.eBV(t),n.Njj(e.dismiss())}),n.nrm(6,"ion-icon",9),n.k0s()()()(),n.j41(7,"ion-content",10)(8,"form",11,0),n.bIt("ngSubmit",function(){n.eBV(t);const u=n.sdS(9);return n.Njj(e.onSubmit(u))}),n.j41(10,"ion-list",12)(11,"ion-item",13)(12,"ion-input",14,1),n.nrm(15,"ion-icon",15),n.k0s(),n.DNE(16,M,1,0,"ion-icon",16),n.k0s(),n.j41(17,"ion-item",13)(18,"ion-input",17,2),n.nrm(21,"ion-icon",18),n.k0s(),n.DNE(22,w,1,0,"ion-icon",16),n.k0s(),n.j41(23,"ion-item")(24,"ion-input",19,3),n.nrm(26,"ion-icon",20),n.k0s(),n.DNE(27,O,1,0,"ion-icon",16),n.k0s()(),n.j41(28,"div",21),n.DNE(29,k,2,1,"ion-button",22)(30,y,3,1,"ion-button",23),n.k0s()()()}if(2&o){const t=n.sdS(14),s=n.sdS(20),u=n.sdS(25);n.R7$(7),n.Y8G("fullscreen",!0),n.R7$(5),n.Y8G("ngModel",null==e.profile?null:e.profile.name),n.R7$(4),n.vxM(t.valid?16:-1),n.R7$(2),n.Y8G("ngModel",null==e.profile?null:e.profile.phone),n.R7$(4),n.vxM(s.valid?22:-1),n.R7$(2),n.Y8G("ngModel",null==e.profile?null:e.profile.email),n.R7$(3),n.vxM(u.valid?27:-1),n.R7$(2),n.vxM(e.isSubmitted?29:30)}},dependencies:[r.IO,r.QW,r.w2,r.Jm,r.iq,r.$w,r.uz,r.nf,r.ai,r.BC,r.eU,r.W9,c.YN,c.qT,c.BC,c.cb,c.YS,c.xh,c.tU,c.vS,c.cV],styles:[".ios[_ngcontent-%COMP%]   ion-toolbar[_ngcontent-%COMP%]   ion-title[_ngcontent-%COMP%]{padding-left:1rem!important}ion-item[_ngcontent-%COMP%]{align-items:center}ion-item[_ngcontent-%COMP%]   ion-label[_ngcontent-%COMP%]{font-size:.8rem!important;font-weight:400!important}.submitButton[_ngcontent-%COMP%]{margin-top:2.5rem}.submitButton[_ngcontent-%COMP%]   ion-button[_ngcontent-%COMP%]   ion-text[_ngcontent-%COMP%]{font-size:1rem}"]}),a})(),E=(()=>{var i;class a{constructor(){this.newPassword=new n.bkB}ngOnInit(){}onSubmit(o){console.log(o),o.valid&&this.newPassword.emit({oldPassword:o.value.old_password,newPassword:o.value.password})}}return(i=a).\u0275fac=function(o){return new(o||i)},i.\u0275cmp=n.VBU({type:i,selectors:[["app-change-password"]],outputs:{newPassword:"newPassword"},standalone:!0,features:[n.aNF],decls:19,vars:5,consts:[["f","ngForm"],["oldpasswordCtrl","ngModel"],["passwordCtrl","ngModel"],[1,"ion-no-border"],["lines","none",1,"ion-margin-top"],[1,"ion-padding"],[3,"fullscreen"],[3,"ngSubmit"],[1,"ion-margin","ion-padding-horizontal"],["label","","type","text","color","medium","name","old_password","ngModel","","placeholder","Old Password",3,"required"],["name","key","slot","start","color","medium"],[1,"ion-margin","ion-padding-horizontal","ion-padding-bottom"],["label","","type","text","color","medium","name","password","ngModel","","placeholder","New Password",3,"required"],["expand","block","size","large","shape","round","color","primary","type","submit",3,"strong","disabled"],["color","light"]],template:function(o,e){if(1&o){const t=n.RV6();n.j41(0,"ion-header",3)(1,"ion-list",4)(2,"ion-list-header",5)(3,"ion-label"),n.EFF(4," Change password "),n.k0s()()()(),n.j41(5,"ion-content",6)(6,"form",7,0),n.bIt("ngSubmit",function(){n.eBV(t);const u=n.sdS(7);return n.Njj(e.onSubmit(u))}),n.j41(8,"div",8)(9,"ion-input",9,1),n.nrm(11,"ion-icon",10),n.k0s()(),n.j41(12,"div",11)(13,"ion-input",12,2),n.nrm(15,"ion-icon",10),n.k0s()(),n.j41(16,"ion-button",13)(17,"ion-text",14),n.EFF(18," SUBMIT "),n.k0s()()()()}if(2&o){const t=n.sdS(7);n.R7$(5),n.Y8G("fullscreen",!0),n.R7$(4),n.Y8G("required",!0),n.R7$(4),n.Y8G("required",!0),n.R7$(3),n.Y8G("strong",!0)("disabled",!t.valid)}},dependencies:[r.IO,r.nf,r.he,r.AF,r.Jm,r.iq,r.W9,r.eU,r.$w,c.YN,c.qT,c.BC,c.cb,c.YS,c.vS,c.cV],styles:["ion-list[_ngcontent-%COMP%]   ion-list-header[_ngcontent-%COMP%]   ion-label[_ngcontent-%COMP%]{font-weight:700;font-size:1.4rem;letter-spacing:.5px}ion-list[_ngcontent-%COMP%]   ion-list-header[_ngcontent-%COMP%]   ion-label[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin-top:1.5vh;font-size:.75rem}ion-input[_ngcontent-%COMP%]{--background: var(--ion-color-light);border-radius:10px}ion-button[_ngcontent-%COMP%]{margin:3vh 3vh 0}ion-button[_ngcontent-%COMP%]   ion-text[_ngcontent-%COMP%]{font-size:.9rem}"]}),a})();var j=d(5079),m=d(5873);const P=()=>[.5,.7,.9,1];function T(i,a){if(1&i){const l=n.RV6();n.j41(0,"ion-item",14),n.bIt("click",function(){const e=n.eBV(l).$implicit,t=n.XpG();return n.Njj(t.navigate(null==e?null:e.route))}),n.nrm(1,"ion-icon",15),n.j41(2,"ion-label"),n.EFF(3),n.k0s()()}if(2&i){const l=a.$implicit;n.Y8G("detail",!(null==l||!l.route)),n.R7$(),n.Y8G("name",null==l?null:l.icon)("color",(null==l?null:l.color)||"dark"),n.R7$(2),n.JRh(null==l?null:l.name)}}function x(i,a){if(1&i){const l=n.RV6();n.j41(0,"app-edit-profile",16),n.bIt("close",function(){n.eBV(l),n.XpG();const e=n.sdS(19);return n.Njj(e.dismiss())}),n.k0s()}if(2&i){const l=n.XpG();n.Y8G("profile",l.profile)}}function F(i,a){if(1&i){const l=n.RV6();n.j41(0,"app-change-password",17),n.bIt("newPassword",function(e){n.eBV(l);const t=n.XpG(),s=n.sdS(22);return n.Njj(t.changePassword(e,s))}),n.k0s()}}let R=(()=>{var i;class a{constructor(){this.options=[],this.isProfile=!1,this.isPwd=!1,this.global=(0,n.WQX)(f.d),this.auth=(0,n.WQX)(C.u),this.profileService=(0,n.WQX)(h.p),(0,j.a)({personOutline:m.wAZ,keyOutline:m.uNo,power:m.ypn,createOutline:m.hmR,person:m.MVM,call:m.T1z,mail:m.kiB,checkmarkSharp:m.uRB,closeOutline:m.xfX,key:m.Ebd})}ngOnInit(){this.getProfile(),this.profileSub=this.profileService.profile.subscribe({next:o=>{this.profile=o,console.log(o)}}),this.options=[{id:1,name:"Edit Profile",icon:"person-outline",route:"edit"},{id:2,name:"Change Password",icon:"key-outline",route:"pwd"},{id:3,name:"Logout",icon:"power",color:"danger"}]}ionViewDidEnter(){this.global.customStatusbar(!0)}ionViewDidLeave(){this.global.customStatusbar()}getProfile(){var o=this;return(0,p.A)(function*(){try{yield o.profileService.getProfile()}catch(e){console.log(e),o.global.checkMessageForErrorToast(e)}})()}navigate(o){var e=this;return(0,p.A)(function*(){if(o)switch(o){case"edit":e.isProfile=!0;break;case"pwd":e.isPwd=!0}else e.confirmLogout()})()}takePicture(){var o=this;return(0,p.A)(function*(){try{const e=yield o.global.takePicture();o.global.showLoader();const t=yield o.profileService.updateProfilePic(e);t&&(o.profile.cover=t.cover,o.global.successToast("Profile picture changed")),o.global.hideLoader()}catch(e){console.log(e),o.global.hideLoader()}})()}changePassword(o,e){var t=this;return(0,p.A)(function*(){try{t.global.showLoader(),yield t.auth.updatePassword(o.oldPassword,o.newPassword),t.global.successToast("Password changed successfully."),e.dismiss(),t.global.hideLoader()}catch(s){console.log(s),t.global.hideLoader(),"auth/invalid-credential"==s.code?t.global.errorToast("Old Password is incorrect. Please try again"):t.global.checkMessageForErrorToast(s)}})()}confirmLogout(){this.global.showAlert("Are you sure you want to sign-out?","Confirm",[{text:"No",role:"cancel"},{text:"Yes",handler:()=>{this.logout()}}])}logout(){var o=this;return(0,p.A)(function*(){try{o.global.showLoader(),yield o.auth.logout(),o.global.navigateByUrl(b.D.LOGIN),o.global.hideLoader()}catch(e){console.log(e),o.global.hideLoader(),o.global.errorToast("Logout Failed! Check your internet connection")}})()}ngOnDestroy(){this.profileSub&&this.profileSub.unsubscribe()}}return(i=a).\u0275fac=function(o){return new(o||i)},i.\u0275cmp=n.VBU({type:i,selectors:[["app-account"]],standalone:!0,features:[n.aNF],decls:24,vars:14,consts:[["edit_profile_modal",""],["change_password_modal",""],[1,"main-header"],[1,"bgColor"],["align","center",1,"image"],["vertical","top","horizontal","right"],["color","primary",3,"click"],["name","create-outline"],[3,"src"],["lines","full",1,"profile"],[1,"ion-text-center"],["lines","none",1,"ion-margin","options"],[1,"ion-margin-bottom",3,"detail"],[3,"didDismiss","isOpen","breakpoints","initialBreakpoint"],[1,"ion-margin-bottom",3,"click","detail"],["slot","start",3,"name","color"],[3,"close","profile"],[3,"newPassword"]],template:function(o,e){if(1&o){const t=n.RV6();n.j41(0,"ion-content")(1,"ion-grid",2),n.nrm(2,"div",3),n.j41(3,"div",4)(4,"ion-fab",5)(5,"ion-fab-button",6),n.bIt("click",function(){return n.eBV(t),n.Njj(e.takePicture())}),n.nrm(6,"ion-icon",7),n.k0s()(),n.j41(7,"ion-avatar"),n.nrm(8,"img",8),n.k0s()()(),n.j41(9,"ion-item",9)(10,"ion-label",10),n.EFF(11),n.nI1(12,"uppercase"),n.j41(13,"p"),n.EFF(14),n.k0s()()(),n.j41(15,"ion-list",11),n.Z7z(16,T,4,4,"ion-item",12,n.Vm6),n.k0s(),n.j41(18,"ion-modal",13,0),n.bIt("didDismiss",function(){return n.eBV(t),n.Njj(e.isProfile=!1)}),n.DNE(20,x,1,1,"ng-template"),n.k0s(),n.j41(21,"ion-modal",13,1),n.bIt("didDismiss",function(){return n.eBV(t),n.Njj(e.isPwd=!1)}),n.DNE(23,F,1,0,"ng-template"),n.k0s()()}2&o&&(n.R7$(8),n.Y8G("src",null!=e.profile&&e.profile.photo?e.profile.photo:"assets/imgs/avatar.png",n.B4B),n.R7$(3),n.SpI(" ",n.bMT(12,10,null==e.profile?null:e.profile.name)," "),n.R7$(3),n.Lme("",null==e.profile?null:e.profile.phone," | ",null==e.profile?null:e.profile.email,""),n.R7$(2),n.Dyx(e.options),n.R7$(2),n.Y8G("isOpen",e.isProfile)("breakpoints",n.lJ4(12,P))("initialBreakpoint",.9),n.R7$(3),n.Y8G("isOpen",e.isPwd)("breakpoints",n.lJ4(13,P))("initialBreakpoint",.7))},dependencies:[r.Sb,r.mC,r.iq,r.YW,r.Q8,r.lO,r.nf,r.he,r.uz,r.W9,_.Pc,S,E],styles:['ion-content[_ngcontent-%COMP%]   .main-header[_ngcontent-%COMP%]{height:29vh}ion-content[_ngcontent-%COMP%]   .main-header[_ngcontent-%COMP%]   .bgColor[_ngcontent-%COMP%]{height:20vh;width:120%;background:linear-gradient(to top,var(--ion-color-secondary) 0%,var(--ion-color-primary) 100%);box-shadow:0 1px 10px var(--ion-color-light);border-radius:0 0 50% 50%;margin-left:-6vh;margin-top:-5px}ion-content[_ngcontent-%COMP%]   .main-header[_ngcontent-%COMP%]   .image[_ngcontent-%COMP%]{transform:translateY(-10vh)}ion-content[_ngcontent-%COMP%]   .main-header[_ngcontent-%COMP%]   .image[_ngcontent-%COMP%]   ion-fab[_ngcontent-%COMP%]{margin:-8px 0 0 20px;width:30px;height:30px}ion-content[_ngcontent-%COMP%]   .main-header[_ngcontent-%COMP%]   .image[_ngcontent-%COMP%]   ion-fab[_ngcontent-%COMP%]   ion-fab-button[_ngcontent-%COMP%]{width:30px;height:30px;--background: transparent}ion-content[_ngcontent-%COMP%]   .main-header[_ngcontent-%COMP%]   .image[_ngcontent-%COMP%]   ion-avatar[_ngcontent-%COMP%]{position:relative;width:20vh;height:20vh;background:var(--ion-color-light);margin-bottom:5px;border:7px solid var(--ion-color-light)}ion-content[_ngcontent-%COMP%]   .main-header[_ngcontent-%COMP%]   .image[_ngcontent-%COMP%]   ion-avatar[_ngcontent-%COMP%]:before{content:"";position:absolute;top:0;left:0;right:0;bottom:0;border-radius:50px;padding:3px;background:linear-gradient(to bottom,var(--ion-color-star),#fd1d1d,var(--ion-color-dark),#f56040,#f77737,#fcaf45,#ffdc80);-webkit-mask:linear-gradient(#fff 0 0) content-box,linear-gradient(#fff 0 0);-webkit-mask-composite:destination-out;mask-composite:exclude}ion-content[_ngcontent-%COMP%]   ion-item.profile[_ngcontent-%COMP%]   ion-label[_ngcontent-%COMP%]{font-size:.9rem}ion-content[_ngcontent-%COMP%]   ion-item.profile[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:.7rem!important;font-weight:400!important;margin-top:5px}ion-content[_ngcontent-%COMP%]   ion-item.profile[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{margin:0 .2vh;font-size:.8rem}ion-content[_ngcontent-%COMP%]   .options[_ngcontent-%COMP%]   ion-label[_ngcontent-%COMP%]{font-size:.95rem}']}),a})()}}]);